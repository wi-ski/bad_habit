angular.module('bad_habit.home', ['truncate'])

.controller('HomeController', ['$scope','$http', function ($scope,$http) {
  $scope.oneAtATime = true;
  $scope.hideJediTables = true;

  $scope.showEdit = false;

  $scope.submit = function() {
    // hide the edit field
    $scope.showEdit = false;
    // submit form
    console.log('submit form');
  }

  $scope.toggleResult = function (id) {
  	$scope.ResultInFocus = $scope.nmcResponses.filter(function(nmc){
  		return nmc._id === id;
  	})[0];
  }

  $http({
    method: 'GET',
    url: '/nmc/entry/latest/'
  }).then(function successCallback(response) {
    	$scope.nmcResponses = response.data;
    }, function errorCallback(response) {
      $scope.nmcResponses = [{"_id":"ERROR - Check network","name":"ERROR - Check network","value":"ERROR - Check network","txid":"ERROR - Check network","vout":"ERROR - Check network","address":"ERROR - Check network","height":"ERROR - Check network","expires_in":"ERROR - Check network","expired":"ERROR - Check network","__v":"ERROR - Check network","created":"ERROR - Check network"}];
    });

  // $scope.nmcResponses =[{"_id":"56560cfad5c235f6465023b3","name":"ot/vzXBsPwO1YteAw9Teg614SprV7oKt3pp23BRVs3I4kA","value":"{\"nmcsig\":\"G/Ly22KDXUk9IWanAMm0V4nWvPX72AEGu9lT5fyJrG0razHSG3qV7vFmpVsBhX7dq9dfNAKPjSg8e87Ky0xNen4=\"}\n","txid":"24e9d4b851d616224e3172c18c1f73360c41b0ad80c7e438fc316b8fbe06f23c","vout":"1","address":"MwdogeDp2gofcr23qvokDSYgm3Q74YTjYt","height":"151465","expires_in":"-72095","expired":true,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b4","name":"ot/x0j0rrlwuRMF9EVJkEa6xivHNqaqZI06r9WgxERvW3R","value":"{\"nmcsig\":\"G5zJcY7aGpJiDGzUgzHy2dV5St0D7s+lp0xr/I2zf4QLLzlpbg6ph82xZW0WsouN+8X7/7vlh5Vq1CxZltRHu+A=\"}\n","txid":"f4764d6122215029a7af2c92b432aa7562c2870fd61aed7cc319c9f991b75a0e","vout":"1","address":"Mwj4gy1vCtoNVqEAatUVSHHoexW6uizAws","height":"150022","expires_in":"-73538","expired":true,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b5","name":"ot/yRf0FcrQs05O1eLSkreHruRHBq5tyZkdrxmxwULc5tV","value":"","txid":"8190a7069826d13cabb4b9a6943909301ed67b587a34c2a8f7f2af0ce2348b03","vout":"1","address":"NAMhsVGVC9W8Kvj3mBreKymLLJpD2bFRdy","height":"166004","expires_in":"-57556","expired":true,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b6","name":"d/101SchizophreniaRememberIraqRememberFukushima","value":"","txid":"597d76e26f4eee6798e0979823f276a99949499a6d24f07b5545f8f0a55fd717","vout":"0","address":"N2EAtaacowdefXwMBZRjf458QobtbUWeDr","height":"234522","expires_in":"10962","expired":false,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b7","name":"d/inquisitiohaereticaepravitatissanctumofficium","value":"free btc for games https://goo.gl/f73dNw BM-NBBMiSaFubFM9WwJKiV4ne5Sfi6iEmYP","txid":"b01ab67396eb8b7e93706cf5404a21ede03b3e1acd602bb6fad3eeb4fdb4bbb5","vout":"0","address":"N8kXk5gkRoqa3n32yiCcjH4N6XBhTazE6b","height":"239887","expires_in":"16327","expired":false,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b8","name":"d/internetcorporationforassignednamesandnumbers","value":"{\"ns\":[\"ns01.000webhost.com\",\"ns21.000webhost.com\"]}","txid":"811559c91f7826b62587bb6e7b5101143bb735907349e3c2ca023dcd2fce6144","vout":"0","address":"MvqGTiNg8yG1JnCENZpJgg4KoayF684Qzg","height":"145704","expires_in":"-77856","expired":true,"__v":0,"created":"2015-11-25T19:33:14.626Z"},{"_id":"56560cfad5c235f6465023b9","name":"&test<b>test</b>testÃ¢ÂÂªtestÃ¢ÂÂtestÃ¢ÂÂtestÃ¢ÂÂtest","value":"&test<b>test</b>testÃ¢ÂÂªtestÃ¢ÂÂtestÃ¢ÂÂtestÃ¢ÂÂtest","txid":"7b4fc76a7dc4fbc9b55a300796bb9ae63280213b06377a834e82d9ead6839bfa","vout":"0","address":"N6tXBk5gj5m3pVrqxyNa4CXN3xrkFEwB39","height":"129574","expires_in":"-93986","expired":true,"__v":0,"created":"2015-11-25T19:33:14.627Z"},{"_id":"56560cfad5c235f6465023ba","name":"d/ashleyjax '' N923xnqLDbFauV7qFTek7MaPnSQdf6WHRH","value":"","txid":"32b11f033ff9d3abe96fcd1008dfc2da64a782b5a75123120b56250b23563b8e","vout":"1","address":"N923xnqLDbFauV7qFTek7MaPnSQdf6WHRH","height":"117787","expires_in":"-105773","expired":true,"__v":0,"created":"2015-11-25T19:33:14.627Z"},{"_id":"56560cfad5c235f6465023bb","name":"d/einladungskartenvorlagenvorlagenfuereinladungen","value":"{\"info\":{\"status\":\"for sale\"},\"map\":{\"*\":{\"alias\":\"www.google.nl.\"}}}","txid":"a4115c7fa9c4ae2dd96890213d2ccfec81644b98a3e7ac06c07deaa3bcf8aab0","vout":"1","address":"N8DLtDRBuVDg7jZCmxMLqYxezwtWCKiVLG","height":"56175","expires_in":"-167385","expired":true,"__v":0,"created":"2015-11-25T19:33:14.627Z"},{"_id":"56560cfad5c235f6465023bc","name":"d/geschenke-18-geburtstag-und-geschenkideen-zum-18","value":"{\"map\":{\"*\":{\"alias\":\"en.wikipedia.org./geschenke-18-geburtstag-und-geschenkideen-zum-18\"}}}","txid":"39db76635d4c6c7ff9c76713ea7803af07067d57a29a8003e6f220c333c62323","vout":"0","address":"N3TAKPfMjLA7PqvKHX3VL5ecu1czHT8DgB","height":"56177","expires_in":"-167383","expired":true,"__v":0,"created":"2015-11-25T19:33:14.627Z"},{"_id":"56560cfad5c235f6465023bd","name":"d/<img src='http://www.bitcoin.org/img/logo.png' />","value":"<img src='http://www.bitcoin.org/img/logo.png' />","txid":"4e3312ad7c86a08b424ebea7cd80098fa6404e446dc843b3600f722c79de0f91","vout":"1","address":"NFm34i6pecZoWhmkXn7utqENHNUUz6s2oz","height":"14957","expires_in":"-208603","expired":true,"__v":0,"created":"2015-11-25T19:33:14.644Z"},{"_id":"56560cfad5c235f6465023be","name":"d/inquisitio-haereticae-pravitatis-sanctum-officium","value":"free btc for games https://goo.gl/f73dNw BM-NBBMiSaFubFM9WwJKiV4ne5Sfi6iEmYP","txid":"c57c535975dd9e629fa95fa3d94a8239ee70f25f5214bee045ef5fe5d1e5fc0e","vout":"0","address":"NELNFwGezWUzQmnezbgDpmSSpCCs4tiR46","height":"239887","expires_in":"16327","expired":false,"__v":0,"created":"2015-11-25T19:33:14.644Z"},{"_id":"56560cfad5c235f6465023bf","name":"d/geburtstagseinladungskarten-geburtstagseinladungen","value":"{\"info\":{\"status\":\"for sale\"},\"map\":{\"*\":{\"alias\":\"www.google.com.\"}}}","txid":"200a82ff24e4e688423d5f509a489d2e217b1b96602054cd0de76d3e80238ffa","vout":"1","address":"MwJW358TB2ngEGV1fFoK7vKCWU7DDBKWxP","height":"56175","expires_in":"-167385","expired":true,"__v":0,"created":"2015-11-25T19:33:14.644Z"},{"_id":"56560cfad5c235f6465023c0","name":"d/einladungskarten-vorlagen-vorlagen-fuer-einladungen","value":"{\"info\":{\"status\":\"for rent\"},\"map\":{\"*\":{\"alias\":\"einladungskarten-vorlagen-vorlagen-fuer-einladungen.com.\"}}}","txid":"5079490afeb8488ef431c153a0ca7464af29994b59b541dbff752fcfa93f0001","vout":"0","address":"N4Rp9hB6SuPV2qupxiZdccZnBCLWk8CRJH","height":"56177","expires_in":"-167383","expired":true,"__v":0,"created":"2015-11-25T19:33:14.645Z"},{"_id":"56560cfad5c235f6465023ca","name":"d/<script type='text/javascript'>alert('hello')</script>","value":"{\"map\":{\"<script type=\\\"text/javascript\\\">alert(\\\"namecoin\\\")</script>\":\"<script type=\\\"text/javascript\\\">alert(\\\"world\\\")</script>\"}}","txid":"95afa6ea229bb00417adc1e692735e81159792b0ded4c6c999a38b663396f122","vout":"1","address":"NKeJK6coMSY9MHT3bkMzAayWKtZkuKaZHR","height":"14957","expires_in":"-208603","expired":true,"__v":0,"created":"2015-11-25T19:33:14.646Z"},{"_id":"56560cfad5c235f646502372","name":"m/fb06e39b850cd48b25ef75e6e1d1daefbae65a85","value":"{\"cert_sha1\":\"d2:1b:e3:2f:45:99:d1:fc:2d:7f:91:49:01:e2:12:0a:d7:de:42:09\",\"id\":\"507\",\"url\":\"http:\\/\\/www.securedolphin.com\\/users\\/andrew-v-uroskie\"}","txid":"123cdac2ea177b45158a0626a4ff322fc6f9e82fa9a0d861a7e4ada108b06a40","vout":"1","address":"N9BkoSZmTW7VW1z3hCy1xEkEc86GbRht3o","height":"194913","expires_in":"-28647","expired":true,"__v":0,"created":"2015-11-25T19:33:14.563Z"},{"_id":"56560cfad5c235f646502373","name":"m/fbdd355617e1fd6ac57611fed41514812e60a3e8","value":"{\"cert_sha1\":\"c5:ad:19:42:21:52:1e:ef:30:43:47:e9:91:45:e9:46:a7:5f:56:c4\",\"id\":\"673\",\"url\":\"http:\\/\\/www.securedolphin.com\\/users\\/marcy-jacobs-marcyjacobs73gmailcom\"}","txid":"6f7ac932128f899b98bf8936a9c39ddf46d77b59eb83cb72fd6fa86abc36925f","vout":"1","address":"MvrGRroN7j4fRVVyik3gR9rP2cQPkVfKsj","height":"206422","expires_in":"-17138","expired":true,"__v":0,"created":"2015-11-25T19:33:14.563Z"},{"_id":"56560cfad5c235f646502374","name":"m/fcd51ebeff1157c14a9f0d0ff49d29ec16ae4244","value":"{\"cert_sha1\":\"43:fe:be:1e:65:3c:6b:c4:cf:25:5d:97:ec:a4:52:58:47:ce:91:a7\",\"id\":\"521\",\"url\":\"http:\\/\\/www.securedolphin.com\\/users\\/mai-astonmartin\"}","txid":"4e0766228b8799db1f6917c810eecfbfaabc7184896fc7026b4ddd3e45c85670","vout":"1","address":"MyPjFSGfo8f1U4WaJNHvpaab48QBJSajBB","height":"195991","expires_in":"-27569","expired":true,"__v":0,"created":"2015-11-25T19:33:14.563Z"},{"_id":"56560cfad5c235f646502375","name":"m/fd0ff2b75d07a2557ea043ccaa0bdc15ef69c5a6","value":"{\"cert_sha1\":\"7c:03:17:b0:71:68:4d:7d:09:26:bf:55:7f:7c:0b:04:21:08:2d:fb\",\"id\":\"724\",\"url\":\"http:\\/\\/www.securedolphin.com\\/users\\/simba-mandeya-simbamandeyagmailcom\"}","txid":"78f9efbedc7197caa03ec0681d8196a1d9c02ad5dac5a4a159ff6904e9cc2ffd","vout":"1","address":"N139jbSiBnZJqdGgLZDB2W4E3fqzX36pf1","height":"210210","expires_in":"-13350","expired":true,"__v":0,"created":"2015-11-25T19:33:14.563Z"},{"_id":"56560cfad5c235f646502376","name":"m/fd3558c0fc532d4a62aa10acf699676c693865a7","value":"{\"cert_sha1\":\"8a:91:ac:c0:89:76:79:e3:2b:55:6b:6d:ea:e7:15:70:db:38:26:f4\",\"id\":\"247\",\"url\":\"http:\\/\\/www.securedolphin.com\\/users\\/joseph-p-smetona-jr\"}","txid":"3903d2d499d8157f1218e3e009976ebe95b501157757ed4a8f09e4e8885a583d","vout":"1","address":"NDHfQahf73CTBpSmchUvjiLfxThfA7GzxN","height":"192379","expires_in":"-31181","expired":true,"__v":0,"created":"2015-11-25T19:33:14.563Z"}]

}])

.directive('tooltoggler', function()
{
   return {
        link: function (scope, element, attr) {
            element.on('mousedown', function (event) {
                // Prevent default dragging of selected content
                event.preventDefault();
                scope.toggleResult(attr.id);
            });
        }
    };
});